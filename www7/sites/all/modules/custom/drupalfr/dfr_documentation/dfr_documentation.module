<?php

/**
 * Implements hook_menu().
 */
function dfr_documentation_menu() {
  $items = array();
  $items['documentation'] = array(
    'title' => 'Documentation',
    'page callback' => 'dfr_documentation_page',
    'access arguments' => array('access content'),
    'menu_name' => 'primary-links',
    'type' => MENU_CALLBACK,
  );

  return $items;
}

function dfr_documentation_page() {
  $output = array(
    'books' => array(
      '#prefix' => '<div id="documentation">',
      '#suffix' => '</div>',
    ),
  );

  $books = node_load_multiple(array(4395, 5037, 56, 9619, 4));
  foreach ($books as $book) {
    $output['books'][] = array(
      'book' => entity_view('node', array($book), 'teaser'),
      // FIXME: This should be a in specific template instead
      'children' => array(
        '#markup' => book_children($book->book),
      ),
    );
  }

  return $output;
}

